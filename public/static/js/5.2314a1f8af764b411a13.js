webpackJsonp([5],{"58n/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Gu7T"),n=s.n(a),o=s("VG3+"),i=s.n(o),r={name:"readblog",data:function(){return{author:null,showgaunzu:!0,article:{},loading:!1,loading2:!1,logd:!1,state:!0,comment:{creatime:"",content:"",linuxtime:"",author:"",blog:""},commentlist:[]}},methods:{panduan:function(t){var e=this;this.$store.state.userinfo?(0==this.$store.state.userinfo.follows.length&&(this.state=!0),this.$store.state.userinfo.follows.forEach(function(s){e.state=s!=t})):this.state=!0},getblog:function(){var t=this;this.loading=!0;var e=this.$route.query.id;this.$axios.get("/blog/detail",{id:e}).then(function(e){t.article=e.data,t.author=t.article.author,t.loading=!1,t.$store.state.userinfo?t.author._id==t.$store.state.userinfo._id&&(t.showgaunzu=!1):t.showgaunzu=!0,t.panduan(t.author._id),t.getcommeents()})},addfollows:function(){var t=this,e=this.author._id;this.$store.state.userinfo?this.$axios.post("/fan/add",{id:e}).then(function(s){200==s.code&&(t.author=s.data,t.$store.commit("CHANGEUSERINFO",s.user),t.panduan(e))}):this.$message.info("您老还没登陆😜")},delfollows:function(){var t=this,e=this.author._id;this.$store.state.userinfo?this.$axios.post("/fan/del",{id:e}).then(function(s){200==s.code&&(t.author=s.data,t.$store.commit("CHANGEUSERINFO",s.user),t.panduan(e))}):(this.panduan(e),this.$message.info("😱没登陆没法操作😗"))},addcomments:function(){var t=this;this.logd=!0;var e=+new Date;this.comment.linuxtime=e,this.comment.creatime=i.a.changedata(e),this.comment.author=this.$store.state.userinfo.id,this.comment.blog=this.article._id,this.comment.content?this.$axios.post("/comment/add",this.comment).then(function(e){200==e.code?(t.logd=!1,t.$message.success({message:e.msg}),t.comment.content="",t.commentlist=[e.data].concat(n()(t.commentlist))):403==e.code?(t.$message.error(e.msg),t.$store.commit("CHANGEUSERINFO",null)):(t.logd=!1,t.$message.error("添加失败"))}):(this.$message.info("评论内容不能为🈳"),this.logd=!1)},getcommeents:function(){var t=this;this.loading2=!0,this.$axios.get("/comment",{id:this.$route.query.id}).then(function(e){console.log(e),200===e.code?(t.commentlist=e.data,t.loading2=!1):t.loading2=!1})},changereadnum:function(){this.$axios.get("/blog/looknum",{id:this.$route.query.id}).then(function(t){})}},created:function(){this.getblog(),this.changereadnum()}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"read_blog_wrpaer w960"},[s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"read_blog_card",attrs:{"element-loading-text":"🙃拼命加载中😵","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n                 博文详情\n            ")]),t._v(" "),s("el-row",[s("el-col",{staticClass:"author_wraper",attrs:{span:4}},[t.author?s("div",{staticClass:"auth_message"},[s("h4",[t._v("作者")]),t._v(" "),s("div",{staticClass:"authorimg"},[s("img",{attrs:{src:t.author.avatar,width:"100%",alt:"作者"}})]),t._v(" "),s("div",{staticClass:"authdetail"},[s("p",[t._v(t._s(t.author.username))]),t._v(" "),s("p",[t._v("粉丝："+t._s(t.author.fans.length))]),t._v(" "),s("p",[t._v("关注："+t._s(t.author.follows.length))]),t._v(" "),s("p",[t._v("博文："+t._s(t.author.blogs.length))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showgaunzu,expression:"showgaunzu"}]},[t.state?s("el-button",{staticClass:"followbtn",on:{click:t.addfollows}},[t._v("\n                                      +关注\n                                  ")]):s("el-button",{staticClass:"followbtn",on:{click:t.delfollows}},[t._v("\n                                      取消关注\n                                  ")])],1)]):t._e()]),t._v(" "),s("el-col",{staticClass:"article_message",attrs:{span:18}},[s("div",{staticClass:"blog_messages"},[s("div",[t._v("\n                                     "+t._s(t.article.title)+" \n                                 ")]),t._v(" "),s("div",{staticClass:"article_rhfu"},[s("div",{staticClass:"new_bog_footer"},[s("div",{staticClass:"article_messae"},[s("span",[t._v("\n                                                    "+t._s(t.article.creatime)+"\n                                                ")]),t._v(" "),s("span",[t._v("\n                                                 \n                                                    浏览("+t._s(t.article.looknum)+")\n                                                ")]),t._v(" "),s("span",[t._v("\n                                                   \n                                                    回复("+t._s(t.article.readnum)+")\n                                                ")])])])]),t._v(" "),s("div",{staticClass:"blog_corver"},[s("img",{attrs:{src:t.article.corver,width:"100%",alt:""}})]),t._v(" "),s("div",{staticClass:"blog_content",domProps:{innerHTML:t._s(t.article.content)}})])])],1)],1),t._v(" "),s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticClass:"comment_card",attrs:{"element-loading-text":"🙃拼命加载中😵","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n                    评论\n              ")]),t._v(" "),t.$store.state.userinfo?s("div",{staticClass:"add_comments"},[s("div",{staticClass:"who_add"},[s("div",{staticClass:"author_img"},[s("img",{attrs:{src:t.$store.state.userinfo.avatar,width:"100%",alt:""}})]),t._v(" "),s("div",{staticClass:"comments_input"},[s("el-input",{staticClass:"com_input",attrs:{placeholder:"输入评论😋..."},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}})],1)]),t._v(" "),s("div",{staticClass:"add_button"},[s("p",[t._v("\n                               ENTER && BUTTON 🧐\n                               "),s("el-button",{attrs:{loading:t.logd},on:{click:t.addcomments}},[t._v("\n                                   添加评论\n                               ")])],1)])]):t._e(),t._v(" "),s("div",{staticClass:"comments_list_wraper"},[s("ul",t._l(t.commentlist,function(e,a){return s("li",{key:a,staticClass:"comment_item"},[e.author?s("div",{staticClass:"zuthor_message"},[s("div",{staticClass:"auth_img"},[s("img",{attrs:{src:e.author.avatar,alt:""}}),t._v(" "),s("span",[t._v(t._s(e.author.username))])]),t._v(" "),s("div",{staticClass:"coment_conteent"},[t._v("\n                                        "+t._s(e.content)+"\n                                  ")]),t._v(" "),s("div",{staticClass:"comment_other"},[s("span",[t._v("\n                                                    "+t._s(e.creatime)+"\n                                                ")]),t._v(" "),s("span",[t._v("\n                                                 \n                                                    浏览("+t._s(e.readnum)+")\n                                                ")]),t._v(" "),s("span",[t._v("\n                                                    回复("+t._s(e.ansernum)+")\n                                              ")])])]):t._e()])}))])])],1)},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("q//v")},"data-v-527a2aa4",null);e.default=c.exports},"5zde":function(t,e,s){s("zQR9"),s("qyJz"),t.exports=s("FeBl").Array.from},Gu7T:function(t,e,s){"use strict";e.__esModule=!0;var a,n=s("c/Tr"),o=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return(0,o.default)(t)}},"c/Tr":function(t,e,s){t.exports={default:s("5zde"),__esModule:!0}},fBQ2:function(t,e,s){"use strict";var a=s("evD5"),n=s("X8DO");t.exports=function(t,e,s){e in t?a.f(t,e,n(0,s)):t[e]=s}},"q//v":function(t,e){},qyJz:function(t,e,s){"use strict";var a=s("+ZMJ"),n=s("kM2E"),o=s("sB3e"),i=s("msXi"),r=s("Mhyx"),l=s("QRG4"),c=s("fBQ2"),d=s("3fs2");n(n.S+n.F*!s("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,s,n,u,m=o(t),h="function"==typeof this?this:Array,v=arguments.length,_=v>1?arguments[1]:void 0,g=void 0!==_,f=0,p=d(m);if(g&&(_=a(_,v>2?arguments[2]:void 0,2)),void 0==p||h==Array&&r(p))for(s=new h(e=l(m.length));e>f;f++)c(s,f,g?_(m[f],f):m[f]);else for(u=p.call(m),s=new h;!(n=u.next()).done;f++)c(s,f,g?i(u,_,[n.value,f],!0):n.value);return s.length=f,s}})}});
//# sourceMappingURL=5.2314a1f8af764b411a13.js.map