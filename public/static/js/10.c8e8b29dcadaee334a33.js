webpackJsonp([10],{w2yr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("mtWM"),r=e.n(o),n=e("VG3+"),s=e.n(n),i={name:"writeblog",data:function(){return{token:"",obj:{token:""},formdata:{corver:"",title:"",creatime:"",content:"",contentext:"",category:[],author:"",linuxtime:""},options5:[{value:"工作",label:"job"},{value:"生活",label:"life"},{value:"JavaScript",label:"JavaScript"}]}},created:function(){var t=this;r.a.get("http://upload.yaojunrong.com/getToken").then(function(a){t.token=a.data.data,t.obj.token=t.token})},methods:{handleAvatarSuccess:function(t){this.formdata.corver=t.url},onEditorChange:function(t,a){this.formdata.content=a},addblog:function(){var t=this;console.log("...");var a=+new Date;this.formdata.linuxtime=a,this.formdata.creatime=s.a.changedata(a),this.formdata.author=this.$store.state.userinfo._id,this.formdata.content&&this.formdata.title?this.$axios.post("/blog/add",this.formdata).then(function(a){200==a.code&&(t.$message.success({message:a.msg}),setTimeout(function(){t.$router.push("/index/home")},500))}):this.$message.error("标题，内容不阔以为空")},$imgAdd:function(t,a){var e=this,o=new FormData;o.append("file",a),o.append("token",this.token),r()({url:"https://upload-z1.qiniup.com",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(a){var o=a.data.url;e.$refs.md.$img2Url(t,o)})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"writeblog_wraper"},[e("div",{staticClass:"write_blog_wraper"},[e("el-card",{staticClass:"write_blog_card"},[e("el-row",[e("el-col",{staticClass:"writeblogss",attrs:{span:24}},[e("el-form",[e("el-form-item",{attrs:{label:"标题"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.title,expression:"formdata.title"}],staticClass:"myinput",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.formdata.title},on:{input:function(a){a.target.composing||t.$set(t.formdata,"title",a.target.value)}}}),t._v(" "),e("i",[t._v("博文封面")]),t._v(" "),e("el-upload",{staticClass:"avatar-uploader fr",attrs:{action:"https://upload-z1.qiniup.com",data:t.obj,"on-success":t.handleAvatarSuccess}},[t.formdata.corver?e("img",{staticClass:"avatar",attrs:{src:t.formdata.corver}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),e("el-form-item",{attrs:{label:"分类"}},[e("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"分类可自行添加其他分类"},model:{value:t.formdata.category,callback:function(a){t.$set(t.formdata,"category",a)},expression:"formdata.category"}},t._l(t.options5,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("el-form-item",[e("mavon-editor",{ref:"md",staticClass:"mavon",on:{change:t.onEditorChange,imgAdd:t.$imgAdd},model:{value:t.formdata.contentext,callback:function(a){t.$set(t.formdata,"contentext",a)},expression:"formdata.contentext"}})],1),t._v(" "),e("el-form-item",{staticClass:"fabuitem"},[e("el-button",{staticClass:"fabumybtn",on:{click:t.addblog}},[t._v("\n                                          发布文章\n                                      ")])],1)],1)],1)],1)],1)],1)])},staticRenderFns:[]};var c=e("VU/8")(i,l,!1,function(t){e("xz9S")},"data-v-62c81adc",null);a.default=c.exports},xz9S:function(t,a){}});
//# sourceMappingURL=10.c8e8b29dcadaee334a33.js.map