webpackJsonp([8],{"58n/":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("VG3+"),n=a.n(e),o={name:"readblog",data:function(){return{author:null,showgaunzu:!0,article:{},loading:!1,loading2:!1,logd:!1,state:!0,comment:{creatime:"",content:"",linuxtime:"",author:"",blog:""},commentlist:[]}},methods:{panduan:function(t){var s=this;this.$store.state.userinfo?(0==this.$store.state.userinfo.follows.length&&(this.state=!0),this.$store.state.userinfo.follows.forEach(function(a){s.state=a!=t})):this.state=!0},getblog:function(){var t=this;this.loading=!0;var s=this.$route.query.id;this.$axios.get("/blog/detail",{id:s}).then(function(s){t.article=s.data,t.author=t.article.author,t.loading=!1,t.$store.state.userinfo?t.author._id==t.$store.state.userinfo._id&&(t.showgaunzu=!1):t.showgaunzu=!0,t.panduan(t.author._id),t.getcommeents()})},addfollows:function(){var t=this,s=this.author._id;this.$store.state.userinfo?this.$axios.post("/fan/add",{id:s}).then(function(a){200==a.code&&(t.author=a.data,t.$store.commit("CHANGEUSERINFO",a.user),t.panduan(s))}):this.$message.info("您老还没登陆😜")},delfollows:function(){var t=this,s=this.author._id;this.$store.state.userinfo?this.$axios.post("/fan/del",{id:s}).then(function(a){200==a.code&&(t.author=a.data,t.$store.commit("CHANGEUSERINFO",a.user),t.panduan(s))}):(this.panduan(s),this.$message.info("😱没登陆没法操作😗"))},addcomments:function(){var t=this;this.logd=!0;var s=+new Date;this.comment.linuxtime=s,this.comment.creatime=n.a.changedata(s),this.comment.author=this.$store.state.userinfo._id,this.comment.blog=this.article._id,this.comment.content?this.$axios.post("/comment/add",this.comment).then(function(s){200==s.code?(t.logd=!1,t.$message.success({message:s.msg}),t.comment.content="",t.getcommeents()):403==s.code?(t.$message.error(s.msg),t.$store.commit("CHANGEUSERINFO",null)):(t.logd=!1,t.$message.error("添加失败"))}):(this.$message.info("评论内容不能为🈳"),this.logd=!1)},getcommeents:function(){var t=this;this.loading2=!0,this.$axios.get("/comment",{id:this.$route.query.id}).then(function(s){console.log(s),200===s.code?(t.commentlist=s.data,t.loading2=!1):t.loading2=!1})},changereadnum:function(){this.$axios.get("/blog/looknum",{id:this.$route.query.id}).then(function(t){})}},created:function(){this.getblog(),this.changereadnum()}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"read_blog_wrpaer w960"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"read_blog_card",attrs:{"element-loading-text":"🙃拼命加载中😵","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n                 博文详情\n            ")]),t._v(" "),a("el-row",[a("el-col",{staticClass:"author_wraper",attrs:{span:4}},[t.author?a("div",{staticClass:"auth_message"},[a("h4",[t._v("作者")]),t._v(" "),a("div",{staticClass:"authorimg"},[a("img",{attrs:{src:t.author.avatar,width:"100%",alt:"作者"}})]),t._v(" "),a("div",{staticClass:"authdetail"},[a("p",[t._v(t._s(t.author.username))]),t._v(" "),a("p",[t._v("粉丝："+t._s(t.author.fans.length))]),t._v(" "),a("p",[t._v("关注："+t._s(t.author.follows.length))]),t._v(" "),a("p",[t._v("博文："+t._s(t.author.blogs.length))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showgaunzu,expression:"showgaunzu"}]},[t.state?a("el-button",{staticClass:"followbtn",on:{click:t.addfollows}},[t._v("\n                                      +关注\n                                  ")]):a("el-button",{staticClass:"followbtn",on:{click:t.delfollows}},[t._v("\n                                      取消关注\n                                  ")])],1)]):t._e()]),t._v(" "),a("el-col",{staticClass:"article_message",attrs:{span:18}},[a("div",{staticClass:"blog_messages"},[a("div",[t._v("\n                                     "+t._s(t.article.title)+" \n                                 ")]),t._v(" "),a("div",{staticClass:"article_rhfu"},[a("div",{staticClass:"new_bog_footer"},[a("div",{staticClass:"article_messae"},[a("span",[t._v("\n                                                    "+t._s(t.article.creatime)+"\n                                                ")]),t._v(" "),a("span",[t._v("\n                                                 \n                                                    浏览("+t._s(t.article.looknum)+")\n                                                ")]),t._v(" "),a("span",[t._v("\n                                                   \n                                                    回复("+t._s(t.article.readnum)+")\n                                                ")])])])]),t._v(" "),a("div",{staticClass:"blog_corver"},[a("img",{attrs:{src:t.article.corver,width:"100%",alt:""}})]),t._v(" "),a("div",{staticClass:"blog_content",domProps:{innerHTML:t._s(t.article.content)}})])])],1)],1),t._v(" "),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticClass:"comment_card",attrs:{"element-loading-text":"🙃拼命加载中😵","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n                    评论\n              ")]),t._v(" "),t.$store.state.userinfo?a("div",{staticClass:"add_comments"},[a("div",{staticClass:"who_add"},[a("div",{staticClass:"author_img"},[a("img",{attrs:{src:t.$store.state.userinfo.avatar,width:"100%",alt:""}})]),t._v(" "),a("div",{staticClass:"comments_input"},[a("el-input",{staticClass:"com_input",attrs:{placeholder:"输入评论😋..."},model:{value:t.comment.content,callback:function(s){t.$set(t.comment,"content",s)},expression:"comment.content"}})],1)]),t._v(" "),a("div",{staticClass:"add_button"},[a("p",[t._v("\n                               ENTER && BUTTON 🧐\n                               "),a("el-button",{attrs:{loading:t.logd},on:{click:t.addcomments}},[t._v("\n                                   添加评论\n                               ")])],1)])]):t._e(),t._v(" "),a("div",{staticClass:"comments_list_wraper"},[a("ul",t._l(t.commentlist,function(s,e){return a("li",{key:e,staticClass:"comment_item"},[s.author?a("div",{staticClass:"zuthor_message"},[a("div",{staticClass:"auth_img"},[a("img",{attrs:{src:s.author.avatar,alt:""}}),t._v(" "),a("span",[t._v(t._s(s.author.username))])]),t._v(" "),a("div",{staticClass:"coment_conteent"},[t._v("\n                                        "+t._s(s.content)+"\n                                  ")]),t._v(" "),a("div",{staticClass:"comment_other"},[a("span",[t._v("\n                                                    "+t._s(s.creatime)+"\n                                                ")]),t._v(" "),a("span",[t._v("\n                                                 \n                                                    浏览("+t._s(s.readnum)+")\n                                                ")]),t._v(" "),a("span",[t._v("\n                                                    回复("+t._s(s.ansernum)+")\n                                              ")])])]):t._e()])}))])])],1)},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(t){a("Vwsv")},"data-v-2f0f5662",null);s.default=l.exports},Vwsv:function(t,s){}});
//# sourceMappingURL=8.1999d75adca0b603f908.js.map